{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/webpack/bootstrap","webpack://mesto-project-ff/webpack/runtime/define property getters","webpack://mesto-project-ff/webpack/runtime/hasOwnProperty shorthand","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/handler.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const openModal = popup => {\r\n\tpopup.classList.add('popup_is-opened')\r\n\tpopup.addEventListener('click', closePopupByClick)\r\n\r\n\tdocument.addEventListener('keydown', closePopupByEsc)\r\n}\r\n\r\nconst closeModal = popup => {\r\n\tpopup.classList.remove('popup_is-opened')\r\n\tpopup.removeEventListener('click', closePopupByClick)\r\n\tdocument.removeEventListener('keydown', closePopupByEsc)\r\n}\r\n\r\nconst closePopupByClick = evt => {\r\n\tif (\r\n\t\tevt.target === evt.currentTarget ||\r\n\t\tevt.target.classList.contains('popup__close')\r\n\t) {\r\n\t\tcloseModal(document.querySelector('.popup_is-opened'))\r\n\t}\r\n}\r\n\r\nconst closePopupByEsc = evt => {\r\n\tif (evt.key === 'Escape') {\r\n\t\tcloseModal(document.querySelector('.popup_is-opened'))\r\n\t}\r\n}\r\n\r\nexport { openModal, closeModal }\r\n","const token = '3150b793-2139-4a81-bc54-adc352f9350d'\r\nconst address = 'https://nomoreparties.co/v1/wff-cohort-10'\r\nconst handleRequest = res => {\r\n\tif (res.ok) {\r\n\t\treturn res.json()\r\n\t}\r\n\tthrow new Error(`Ошибка: ${res.status}`)\r\n}\r\n\r\nconst getData = () => {\r\n\treturn fetch(`${address}/cards`, {\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst getUserData = () => {\r\n\treturn fetch(`${address}/users/me`, {\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst createNewCard = cardData => {\r\n\treturn fetch(`${address}/cards`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify(cardData),\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst editProfile = profileInfo => {\r\n\treturn fetch(`${address}/users/me`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify(profileInfo),\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst displayProfileInfo = () => {\r\n\treturn fetch(`${address}/users/me`, {\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify(),\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst editAvatar = avatar => {\r\n\treturn fetch(`${address}/users/me/avatar`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tavatar: avatar,\r\n\t\t}),\r\n\t}).then(handleRequest)\r\n}\r\n\r\n\r\nconst deleteCardsApi = cardDataId => {\r\n\treturn fetch(`${address}/cards/${cardDataId}`, {\r\n\t\tmethod: 'DELETE',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t})\r\n}\r\n\r\nconst putLike = cardId => {\r\n\tfetch(`${address}/cards/likes/${cardId}`, {\r\n\t\tmethod: 'PUT',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t})\r\n}\r\n\r\nconst deleteLike = (cardId) => {\r\n\tfetch(`${address}/cards/likes/${cardId}`, {\r\n\t\tmethod: 'DELETE',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t})\r\n}\r\n\r\n\r\nexport {\r\n\tgetData,\r\n\tcreateNewCard,\r\n\teditProfile,\r\n\tdeleteCardsApi,\r\n\tdisplayProfileInfo,\r\n\tgetUserData,\r\n\tputLike,\r\n\tdeleteLike,\r\n\teditAvatar,\r\n}\r\n","import { deleteCardsApi, putLike, deleteLike } from './api'\r\n\r\n// @todo: Функция создания карточки\r\n\r\nconst createCard = (\r\n\tcardData,\r\n\tuserId,\r\n\tdeleteCard,\r\n\tperformActionLike,\r\n\topenModalImg\r\n) => {\r\n\tconst cardTemplate = document.querySelector('#card-template').content\r\n\tconst cardElement = cardTemplate.querySelector('.card').cloneNode(true)\r\n\tconst resetButton = cardElement.querySelector('.card__delete-button')\r\n\tconst cardContainerBtnLike = cardElement.querySelector(\r\n\t\t'.card__container-like'\r\n\t)\r\n\tconst likeButton = cardContainerBtnLike.querySelector('.card__like-button')\r\n\tconst likeBtnActive = 'card__like-button_is-active'\r\n\tconst quantityLike = cardContainerBtnLike.querySelector(\r\n\t\t'.card__quantity-like'\r\n\t)\r\n\r\n\tconst cardImg = cardElement.querySelector('.card__image')\r\n\r\n\tcardImg.src = cardData.link\r\n\tcardImg.alt = cardData.name\r\n\r\n\tcardElement.querySelector('.card__title').textContent = cardData.name\r\n\r\n\tcardImg.addEventListener('click', openModalImg)\r\n\t// console.log(likeButton.classList);\r\n\tlikeButton.addEventListener('click', () => {\r\n\t\tperformActionLike(likeButton, cardData, likeBtnActive)\r\n\t})\r\n\r\n\tif (userId === cardData.owner._id) {\r\n\t\tresetButton.addEventListener('click', () => {\r\n\t\t\tdeleteCard(cardElement), deleteCardsApi(cardData._id)\r\n\t\t})\r\n\t} else {\r\n\t\tresetButton.remove()\r\n\t}\r\n\r\n\tconst likeId = cardData.likes\r\n\tlikeId.forEach(likeElement => {\r\n\t\tif (userId === likeElement._id) {\r\n\t\t\tlikeButton.classList.add(likeBtnActive)\r\n\t\t}\r\n\t})\r\n\tcreateNumberLike(quantityLike, cardData.likes)\r\n\r\n\treturn cardElement\r\n}\r\n\r\n// @todo: Функция удаления карточки\r\n\r\nconst deleteCard = cardElement => {\r\n\tcardElement.remove()\r\n}\r\n\r\n// Функция проставления лайков\r\n\r\nconst performActionLike = (like, cardId, btnActive) => {\r\n\tif (like.classList.contains(btnActive)) {\r\n\t\tdeleteLike(cardId._id)\r\n\t\tlike.classList.remove(btnActive)\r\n\t} else {\r\n\t\tputLike(cardId._id)\r\n\t\tlike.classList.add(btnActive)\r\n\t}\r\n}\r\n\r\nconst createNumberLike = (quantity, cardData) => {\r\n\tif (cardData.length >= 1) {\r\n\t\tquantity.classList.add(`card__quantity-like_active`)\r\n\t\tquantity.textContent = `${cardData.length}`\r\n\t} else {\r\n\t\tquantity.classList.remove(`card__quantity-like_active`)\r\n\t}\r\n}\r\n\r\nexport { performActionLike, deleteCard, createCard }\r\n","import { createCard } from './card'\r\nimport { closeModal } from './modal'\r\nimport {\r\n\tcontainerList,\r\n\tpopupNewCard,\r\n\tpopupEdit,\r\n\tpopupAvatar,\r\n\r\n} from '../index.js'\r\nimport { createNewCard, editProfile, \r\n\teditAvatar \r\n} from './api.js'\r\n\r\nconst nameCardInput = document.querySelector('.popup__input_type_card-name')\r\nconst linkCardInput = document.querySelector('.popup__input_type_url')\r\nconst nameInput = document.querySelector('.popup__input_type_name')\r\nconst jobInput = document.querySelector('.popup__input_type_description')\r\nconst profileName = document.querySelector('.profile__title')\r\nconst profileJob = document.querySelector('.profile__description')\r\nconst avatarInput = document.querySelector('.popup__input_type_url_avatar')\r\nconst avatarImage = document.querySelector('.profile__image-avatar')\r\n\r\nconst displayProfile = profileInfo => {\r\n\tprofileName.textContent = profileInfo.name\r\n\tprofileJob.textContent = profileInfo.about\r\n}\r\n\r\nconst showAvatar = avatar => {\r\n\tavatarImage.src = avatar.avatar\r\n}\r\n\r\nconst handleAvatarForm = evt => {\r\n\tevt.preventDefault()\r\n\tconst valueAvatarInput = avatarInput.value\r\n\teditAvatar(valueAvatarInput).then(avatar=> {\r\n\tavatarImage.src = avatar.avatar\r\n\t})\r\n  \tcloseModal(popupAvatar)\r\n}\r\n\r\n// Добавить карточку\r\nconst handleAddCardForm = evt => {\r\n\tevt.preventDefault()\r\n\r\n\tconst valueNameCard = nameCardInput.value\r\n\tconst valueLinkCard = linkCardInput.value\r\n\r\n\t\tcreateNewCard({\r\n\t\t\tname: valueNameCard,\r\n\t\t\tlink: valueLinkCard,\r\n\t\t})\r\n\t\t\t.then(cardData => {\r\n\t\t\t\tcontainerList.prepend(createCard(cardData))\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t\t\t})\r\n\r\n\tcloseModal(popupNewCard)\r\n}\r\n\r\n// Обработчик «отправки» формы\r\n\r\nconst handleEditForm = evt => {\r\n\tevt.preventDefault()\r\n\r\n\tconst valueName = nameInput.value\r\n\tconst valueJob = jobInput.value\r\n\r\n\teditProfile({\r\n\t\tname: valueName,\r\n\t\tabout: valueJob,\r\n\t})\r\n\t\t.then(profileInfo => {\r\n\t\t\tprofileName.textContent = profileInfo.name\r\n\t\t\tprofileJob.textContent = profileInfo.about\r\n\t\t})\r\n\t\t.catch(res => {\r\n\t\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t\t})\r\n\r\n\tcloseModal(popupEdit)\r\n}\r\n\r\n// // Мод.окно ред.профиля отображение текста\r\nconst fillProfilePopupEdit = () => {\r\n\tnameInput.value = profileName.textContent\r\n\tjobInput.value = profileJob.textContent\r\n}\r\n\r\nexport {\r\n\thandleEditForm,\r\n\thandleAddCardForm,\r\n\thandleAvatarForm,\r\n\tfillProfilePopupEdit,\r\n\tdisplayProfile,\r\n\tshowAvatar\r\n}\r\n","\r\nconst validationConfig = {\r\n\tformSelector: '.popup__form',\r\n\tinputSelector: '.popup__input',\r\n\tsubmitButtonSelector: '.popup__button',\r\n\tinactiveButtonClass: 'popup__button_disabled',\r\n\tinputErrorClass: 'popup__input_type_error',\r\n}\r\n\r\n// Ошибка\r\nconst showInputError = (formElement, inputElement, errorMessage) => {\r\n\tconst errorElement = formElement.querySelector(`.${inputElement.id}-error`)\r\n\tinputElement.classList.add(validationConfig.inputErrorClass)\r\n\r\n\terrorElement.textContent = errorMessage\r\n\terrorElement.classList.add('popup__input-error_active')\r\n}\r\n//Скрытие ошибки\r\nconst hideInputError = (formElement, inputElement) => {\r\n\tconst errorElement = formElement.querySelector(`.${inputElement.id}-error`)\r\n\tinputElement.classList.remove(validationConfig.inputErrorClass)\r\n\terrorElement.classList.remove('popup__input-error_active')\r\n\terrorElement.textContent = ''\r\n}\r\n//Проверка\r\nconst checkInputValidity = (formElement, inputElement) => {\r\n\tif (inputElement.validity.patternMismatch) {\r\n\t\tinputElement.setCustomValidity(inputElement.dataset.errorMessage)\r\n\t} else {\r\n\t\tinputElement.setCustomValidity('')\r\n\t}\r\n\tif (!inputElement.validity.valid) {\r\n\t\tshowInputError(formElement, inputElement, inputElement.validationMessage)\r\n\t} else {\r\n\t\thideInputError(formElement, inputElement)\r\n\t}\r\n}\r\n//Проверка всех полей\r\nconst hasInvalidInput = inputList => {\r\n\treturn inputList.some(inputElement => {\r\n\t\treturn !inputElement.validity.valid\r\n\t})\r\n}\r\n//Функция блокировки/разбл. кнопки\r\nconst toggleButtonState = (inputList, buttonElement) => {\r\n\tif (hasInvalidInput(inputList)) {\r\n\t\tbuttonElement.classList.add(validationConfig.inactiveButtonClass)\r\n\t} else {\r\n\t\tbuttonElement.classList.remove(validationConfig.inactiveButtonClass)\r\n\t}\r\n}\r\n\r\nconst setEventListeners = formElement => {\r\n\tconst inputList = Array.from(\r\n\t\tformElement.querySelectorAll(validationConfig.inputSelector)\r\n\t)\r\n\tconst buttonElement = formElement.querySelector(\r\n\t\tvalidationConfig.submitButtonSelector\r\n\t)\r\n\ttoggleButtonState(inputList, buttonElement)\r\n\r\n\tinputList.forEach(inputElement => {\r\n\t\tinputElement.addEventListener('input', () => {\r\n\t\t\tcheckInputValidity(formElement, inputElement)\r\n\t\t\ttoggleButtonState(inputList, buttonElement)\r\n\t\t})\r\n\t})\r\n}\r\n\r\n//Включение проверки\r\nconst enableValidation = () => {\r\n\tconst formList = Array.from(\r\n\t\tdocument.querySelectorAll(validationConfig.formSelector)\r\n\t)\r\n\r\n\tformList.forEach(formElement => {\r\n\t\tformElement.addEventListener('submit', evt => {\r\n\t\t\tevt.preventDefault()\r\n\r\n\t\t\t// buttonElement.textContent = 'Сохранение...'\r\n\t\t})\r\n\t\tsetEventListeners(formElement)\r\n\t})\r\n}\r\n\r\nconst clearValidation = validationConfig => {\r\n\t// buttonElement.textContent = 'Сохранить'\r\n\r\n\tconst inputListError = Array.from(\r\n\t\tdocument.querySelectorAll('.popup__input-error')\r\n\t)\r\n\t// toggleButtonState(inputList, buttonElement)\r\n\r\n\tinputListError.forEach(errorElement => {\r\n\t\terrorElement.innerText = ''\r\n\t})\r\n\t// inputList.forEach(inputError =>\r\n\t// \tinputError.classList.remove(validationConfig.inputErrorClass)\r\n\t// )\r\n}\r\n\r\nexport { enableValidation, clearValidation }\r\n","import './pages/index.css'\r\nimport { openModal } from './scripts/modal.js'\r\nimport { createCard, deleteCard, performActionLike } from './scripts/card.js'\r\nimport {\r\n\thandleAddCardForm,\r\n\thandleEditForm,\r\n\tfillProfilePopupEdit,\r\n\tdisplayProfile,\r\n\thandleAvatarForm,\r\n\tshowAvatar,\r\n} from './scripts/handler.js'\r\nimport { enableValidation, clearValidation } from './scripts/validation.js'\r\nimport { getData, displayProfileInfo, getUserData } from './scripts/api.js'\r\n// @todo: DOM узлы\r\nconst containerList = document.querySelector('.places__list')\r\n\r\n// Константы для модальных окон\r\n//Мод.окно ред.профиля\r\nconst popupEdit = document.querySelector('.popup_type_edit')\r\nconst btnEditOpen = document.querySelector('.profile__edit-button')\r\n\r\n//Мод.окно добавления новой карточки\r\nconst popupNewCard = document.querySelector('.popup_type_new-card')\r\nconst btnOpenNewCard = document.querySelector('.profile__add-button')\r\n\r\n//Обработчик событий\r\nconst editForm = document.forms['edit-profile']\r\nconst cardForm = document.forms['new-place']\r\nconst avatarForm = document.forms['avatar']\r\n\r\n//Обработчик открытия картинок\r\nconst modalImg = document.querySelector('.popup_type_image')\r\nconst imgPopup = modalImg.querySelector('.popup__image')\r\nconst popupCaption = modalImg.querySelector('.popup__caption')\r\n\r\nconst openModalImg = evt => {\r\n\tconst img = evt.target\r\n\timgPopup.src = img.src\r\n\timgPopup.alt = popupCaption.textContent = img.alt\r\n\topenModal(modalImg)\r\n}\r\n\r\nconst btnAvatar = document.querySelector('.profile__image')\r\nconst popupAvatar = document.querySelector('.popup_type_avatar')\r\n\r\nbtnAvatar.addEventListener('click', () => {\r\n\tavatarForm.reset(), clearValidation(), openModal(popupAvatar)\r\n})\r\n\r\n//вызов мод.окон(ред.проф)\r\nbtnEditOpen.addEventListener('click', () => {\r\n\tclearValidation()\r\n\topenModal(popupEdit)\r\n\tfillProfilePopupEdit()\r\n})\r\n\r\n//Включение проверки\r\nenableValidation()\r\n\r\n//вызов мод. окон(добавление карточки)\r\nbtnOpenNewCard.addEventListener('click', () => {\r\n\tclearValidation(), \r\n\tcardForm.reset(), \r\n\topenModal(popupNewCard)\r\n})\r\n\r\nconst displayCard = (cards, userId) => {\r\n\tcards.forEach(cardData => {\r\n\t\tconst cards = createCard(\r\n\t\t\tcardData,\r\n\t\t\tuserId,\r\n\t\t\tdeleteCard,\r\n\t\t\tperformActionLike,\r\n\t\t\topenModalImg\r\n\t\t)\r\n\t\tcontainerList.append(cards)\r\n\t})\r\n}\r\n\r\nPromise.all([getData(), getUserData()]).then(([cards, user]) => {\r\n\tconst userId = user._id\r\n\tdisplayCard(cards, userId)\r\n}).catch(res => {\r\n\tthrow new Error(`Ошибка: ${res.status}`)\r\n})\r\n\r\ndisplayProfileInfo()\r\n\t.then(profileInfo => {\r\n\t\tdisplayProfile(profileInfo)\r\n\t\tshowAvatar(profileInfo)\r\n\t})\r\n\t.catch(res => {\r\n\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t})\r\n\r\n//Обработчики мод.окон\r\ncardForm.addEventListener('submit', handleAddCardForm)\r\neditForm.addEventListener('submit', handleEditForm)\r\navatarForm.addEventListener('submit', handleAvatarForm)\r\n\r\nexport {\r\n\tcontainerList,\r\n\tpopupNewCard,\r\n\tpopupEdit,\r\n\topenModalImg,\r\n\tbtnAvatar,\r\n\tpopupAvatar,\r\n}\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","openModal","popup","classList","add","addEventListener","closePopupByClick","document","closePopupByEsc","closeModal","remove","removeEventListener","evt","target","currentTarget","contains","querySelector","token","address","handleRequest","res","ok","json","Error","concat","status","createCard","cardData","userId","deleteCard","performActionLike","openModalImg","cardElement","content","cloneNode","resetButton","cardContainerBtnLike","likeButton","likeBtnActive","quantityLike","cardImg","src","link","alt","name","textContent","owner","_id","cardDataId","fetch","method","headers","authorization","likes","forEach","likeElement","createNumberLike","like","cardId","btnActive","deleteLike","putLike","quantity","length","nameCardInput","linkCardInput","nameInput","jobInput","profileName","profileJob","avatarInput","avatarImage","validationConfig","toggleButtonState","inputList","buttonElement","some","inputElement","validity","valid","hasInvalidInput","clearValidation","Array","from","querySelectorAll","errorElement","innerText","containerList","popupEdit","btnEditOpen","popupNewCard","btnOpenNewCard","editForm","forms","cardForm","avatarForm","modalImg","imgPopup","popupCaption","img","btnAvatar","popupAvatar","reset","value","formElement","preventDefault","patternMismatch","setCustomValidity","dataset","errorMessage","id","hideInputError","showInputError","validationMessage","checkInputValidity","setEventListeners","Promise","all","then","_ref","cards","_ref2","append","catch","body","JSON","stringify","profileInfo","avatar","about","displayProfile","prepend"],"sourceRoot":""}