{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/webpack/bootstrap","webpack://mesto-project-ff/webpack/runtime/define property getters","webpack://mesto-project-ff/webpack/runtime/hasOwnProperty shorthand","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/handler.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const openModal = popup => {\r\n\tpopup.classList.add('popup_is-opened')\r\n\tpopup.addEventListener('click', closePopupByClick)\r\n\r\n\tdocument.addEventListener('keydown', closePopupByEsc)\r\n}\r\n\r\nconst closeModal = popup => {\r\n\tpopup.classList.remove('popup_is-opened')\r\n\tpopup.removeEventListener('click', closePopupByClick)\r\n\tdocument.removeEventListener('keydown', closePopupByEsc)\r\n}\r\n\r\nconst closePopupByClick = evt => {\r\n\tif (\r\n\t\tevt.target === evt.currentTarget ||\r\n\t\tevt.target.classList.contains('popup__close')\r\n\t) {\r\n\t\tcloseModal(document.querySelector('.popup_is-opened'))\r\n\t}\r\n}\r\n\r\nconst closePopupByEsc = evt => {\r\n\tif (evt.key === 'Escape') {\r\n\t\tcloseModal(document.querySelector('.popup_is-opened'))\r\n\t}\r\n}\r\n\r\nexport { openModal, closeModal }\r\n","const token = '3150b793-2139-4a81-bc54-adc352f9350d'\r\nconst address = 'https://nomoreparties.co/v1/wff-cohort-10'\r\nconst handleRequest = res => {\r\n\tif (res.ok) {\r\n\t\treturn res.json()\r\n\t}\r\n\tthrow new Error(`Ошибка: ${res.status}`)\r\n}\r\n\r\nconst getData = () => {\r\n\treturn fetch(`${address}/cards`, {\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst getUserData = () => {\r\n\treturn fetch(`${address}/users/me`, {\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst createNewCard = cardData => {\r\n\treturn fetch(`${address}/cards`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify(cardData),\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst editProfile = profileInfo => {\r\n\treturn fetch(`${address}/users/me`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify(profileInfo),\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst editAvatar = avatar => {\r\n\treturn fetch(`${address}/users/me/avatar`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tavatar: avatar,\r\n\t\t}),\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst deleteCardsApi = cardDataId => {\r\n\treturn fetch(`${address}/cards/${cardDataId}`, {\r\n\t\tmethod: 'DELETE',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t})\r\n}\r\n\r\nconst putLike = cardId => {\r\n\treturn fetch(`${address}/cards/likes/${cardId}`, {\r\n\t\tmethod: 'PUT',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t}).then(handleRequest)\r\n}\r\n\r\nconst deleteLike = cardId => {\r\n\treturn fetch(`${address}/cards/likes/${cardId}`, {\r\n\t\tmethod: 'DELETE',\r\n\t\theaders: {\r\n\t\t\tauthorization: token,\r\n\t\t},\r\n\t}).then(handleRequest)\r\n}\r\n\r\nexport {\r\n\tgetData,\r\n\tcreateNewCard,\r\n\teditProfile,\r\n\tdeleteCardsApi,\r\n\tgetUserData,\r\n\tputLike,\r\n\tdeleteLike,\r\n\teditAvatar,\r\n}\r\n","import { deleteCardsApi, putLike, deleteLike } from './api'\r\n\r\n// @todo: Функция создания карточки\r\n\r\nconst createCard = (\r\n\tcardData,\r\n\tuserId,\r\n\tdeleteCallback,\r\n\tperformActionLike,\r\n\topenModalImg\r\n) => {\r\n\tconst cardTemplate = document.querySelector('#card-template').content\r\n\tconst cardElement = cardTemplate.querySelector('.card').cloneNode(true)\r\n\tconst resetButton = cardElement.querySelector('.card__delete-button')\r\n\tconst cardContainerBtnLike = cardElement.querySelector(\r\n\t\t'.card__container-like'\r\n\t)\r\n\tconst likeButton = cardContainerBtnLike.querySelector('.card__like-button')\r\n\tconst likeBtnActive = 'card__like-button_is-active'\r\n\tconst quantityLike = cardContainerBtnLike.querySelector(\r\n\t\t'.card__quantity-like'\r\n\t)\r\n\r\n\tconst cardImg = cardElement.querySelector('.card__image')\r\n\r\n\tcardImg.src = cardData.link\r\n\tcardImg.alt = cardData.name\r\n\r\n\tcardElement.querySelector('.card__title').textContent = cardData.name\r\n\r\n\tcardImg.addEventListener('click', openModalImg)\r\n\tlikeButton.addEventListener('click', () => {\r\n\t\tperformActionLike(likeButton, cardData, likeBtnActive)\r\n\t})\r\n\r\n\tif (userId === cardData.owner._id) {\r\n\t\tresetButton.addEventListener('click', () => {\r\n\t\t\tdeleteCallback(cardData._id, cardElement)\r\n\t\t})\r\n\t} else {\r\n\t\tresetButton.remove()\r\n\t}\r\n\r\n\tif (cardData.likes.some(likeElement => likeElement._id === userId)) {\r\n\t\tlikeButton.classList.add(likeBtnActive)\r\n\t}\r\n\r\n\tcreateNumberLike(quantityLike, cardData.likes)\r\n\r\n\treturn cardElement\r\n}\r\n\r\n// @todo: Функция удаления карточки\r\n\r\nconst deleteCard = cardElement => {\r\n\tcardElement.remove()\r\n}\r\n\r\nconst deleteCallback = (cardId, cardElement) => {\r\n\tdeleteCardsApi(cardId)\r\n\t\t.then(() => deleteCard(cardElement))\r\n\t\t.catch(res => {\r\n\t\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t\t})\r\n}\r\n\r\n// Функция проставления лайков\r\n\r\nconst performActionLike = (like, cardData, btnActive) => {\r\n\tconst likeMethod = like.classList.contains(btnActive) ? deleteLike : putLike\r\n\r\n\tlikeMethod(cardData._id)\r\n\t\t.then(res => {\r\n\t\t\tquantityLike.textContent = res.likes.length\r\n\t\t\tlike.classList.toggle(btnActive)\r\n\t\t})\r\n\t\t.catch(res => {\r\n\t\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t\t})\r\n}\r\n\r\nconst createNumberLike = (quantity, cardData) => {\r\n\tif (cardData.length >= 1) {\r\n\t\tquantity.classList.add(`card__quantity-like_active`)\r\n\t\tquantity.textContent = cardData.length\r\n\t} else {\r\n\t\tquantity.classList.remove(`card__quantity-like_active`)\r\n\t}\r\n}\r\n\r\nexport { performActionLike, deleteCallback, createCard }\r\n","import { createCard, deleteCallback, performActionLike } from './card'\r\nimport { closeModal } from './modal'\r\nimport {\r\n\tcontainerList,\r\n\tpopupNewCard,\r\n\tpopupEdit,\r\n\tpopupAvatar,\r\n\topenModalImg,\r\n} from '../index.js'\r\nimport { createNewCard, editProfile, editAvatar } from './api.js'\r\n\r\nconst nameCardInput = document.querySelector('.popup__input_type_card-name')\r\nconst linkCardInput = document.querySelector('.popup__input_type_url')\r\nconst nameInput = document.querySelector('.popup__input_type_name')\r\nconst jobInput = document.querySelector('.popup__input_type_description')\r\nconst profileName = document.querySelector('.profile__title')\r\nconst profileJob = document.querySelector('.profile__description')\r\nconst avatarInput = document.querySelector('.popup__input_type_url_avatar')\r\nconst avatarImage = document.querySelector('.profile__image-avatar')\r\n\r\nconst displayProfile = profileInfo => {\r\n\tprofileName.textContent = profileInfo.name\r\n\tprofileJob.textContent = profileInfo.about\r\n}\r\n\r\nconst showAvatar = avatar => {\r\n\tavatarImage.src = avatar.avatar\r\n}\r\n\r\nconst handleAvatarForm = evt => {\r\n\tevt.preventDefault()\r\n\tconst valueAvatarInput = avatarInput.value\r\n\teditAvatar(valueAvatarInput)\r\n\t\t.then(avatar => {\r\n\t\t\tavatarImage.src = avatar.avatar\r\n\t\t})\r\n\t\t.catch(res => {\r\n\t\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t\t})\r\n\tcloseModal(popupAvatar)\r\n}\r\n\r\n// Добавить карточку\r\nconst handleAddCardForm = evt => {\r\n\tevt.preventDefault()\r\n\r\n\tconst valueNameCard = nameCardInput.value\r\n\tconst valueLinkCard = linkCardInput.value\r\n\r\n\tcreateNewCard({\r\n\t\tname: valueNameCard,\r\n\t\tlink: valueLinkCard,\r\n\t})\r\n\t\t.then(cardData => {\r\n\t\t\tcontainerList.prepend(\r\n\t\t\t\tcreateCard(\r\n\t\t\t\t\tcardData,\r\n\t\t\t\t\tcardData.owner._id,\r\n\t\t\t\t\tdeleteCallback,\r\n\t\t\t\t\tperformActionLike,\r\n\t\t\t\t\topenModalImg\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t})\r\n\t\t.catch(res => {\r\n\t\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t\t})\r\n\r\n\tcloseModal(popupNewCard)\r\n}\r\n\r\n// Обработчик «отправки» формы\r\n\r\nconst handleEditForm = evt => {\r\n\tevt.preventDefault()\r\n\r\n\tconst valueName = nameInput.value\r\n\tconst valueJob = jobInput.value\r\n\r\n\teditProfile({\r\n\t\tname: valueName,\r\n\t\tabout: valueJob,\r\n\t})\r\n\t\t.then(profileInfo => {\r\n\t\t\tdisplayProfile(profileInfo)\r\n\t\t})\r\n\t\t.catch(res => {\r\n\t\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t\t})\r\n\r\n\tcloseModal(popupEdit)\r\n}\r\n\r\n// // Мод.окно ред.профиля отображение текста\r\nconst fillProfilePopupEdit = () => {\r\n\tnameInput.value = profileName.textContent\r\n\tjobInput.value = profileJob.textContent\r\n}\r\n\r\nexport {\r\n\thandleEditForm,\r\n\thandleAddCardForm,\r\n\thandleAvatarForm,\r\n\tfillProfilePopupEdit,\r\n\tdisplayProfile,\r\n\tshowAvatar,\r\n}\r\n","\r\n// Ошибка\r\nconst showInputError = (\r\n\tformElement,\r\n\tinputElement,\r\n\terrorMessage,\r\n\tvalidationConfig\r\n) => {\r\n\r\n\tconst errorElement = formElement.querySelector(`.${inputElement.id}-error`)\r\n\tinputElement.classList.add(validationConfig.inputErrorClass)\r\n\r\n\terrorElement.textContent = errorMessage\r\n\terrorElement.classList.add(validationConfig.displayError)\r\n}\r\n//Скрытие ошибки\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n\tconst errorElement = formElement.querySelector(`.${inputElement.id}-error`)\r\n\tinputElement.classList.remove(validationConfig.inputErrorClass)\r\n\terrorElement.classList.remove(validationConfig.displayError)\r\n\terrorElement.textContent = ''\r\n}\r\n//Проверка\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n\tif (inputElement.validity.patternMismatch) {\r\n\t\tinputElement.setCustomValidity(inputElement.dataset.errorMessage)\r\n\t} else {\r\n\t\tinputElement.setCustomValidity('')\r\n\t}\r\n\tif (!inputElement.validity.valid) {\r\n\t\tshowInputError(\r\n\t\t\tformElement,\r\n\t\t\tinputElement,\r\n\t\t\tinputElement.validationMessage,\r\n\t\t\tvalidationConfig\r\n\t\t)\r\n\t} else {\r\n\t\thideInputError(formElement, inputElement, validationConfig)\r\n\t}\r\n}\r\n//Проверка всех полей\r\nconst hasInvalidInput = inputList => {\r\n\treturn inputList.some(inputElement => {\r\n\t\treturn !inputElement.validity.valid\r\n\t})\r\n}\r\nconst disableSubmitButton = (buttonElement, validationConfig) => {\r\n\tbuttonElement.disabled = true\r\n\tbuttonElement.classList.add(validationConfig.inactiveButtonClass)\r\n}\r\n//Функция блокировки/разбл. кнопки\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n\tif (hasInvalidInput(inputList)) {\r\n\t\tdisableSubmitButton(buttonElement, validationConfig)\r\n\t} else {\r\n\t\tbuttonElement.disabled = false\r\n\t\tbuttonElement.classList.remove(validationConfig.inactiveButtonClass)\r\n\t}\r\n}\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n\tconst inputList = Array.from(\r\n\t\tformElement.querySelectorAll(validationConfig.inputSelector)\r\n\t)\r\n\tconst buttonElement = formElement.querySelector(\r\n\t\tvalidationConfig.submitButtonSelector\r\n\t)\r\n\ttoggleButtonState(inputList, buttonElement, validationConfig)\r\n\r\n\tinputList.forEach(inputElement => {\r\n\t\tinputElement.addEventListener('input', () => {\r\n\t\t\tcheckInputValidity(formElement, inputElement, validationConfig)\r\n\t\t\ttoggleButtonState(inputList, buttonElement, validationConfig)\r\n\t\t})\r\n\t})\r\n}\r\n\r\n//Включение проверки\r\nconst enableValidation = validationConfig => {\r\n\tconst formList = Array.from(\r\n\t\tdocument.querySelectorAll(validationConfig.formSelector)\r\n\t)\r\n\r\n\tformList.forEach(formElement => {\r\n\t\tformElement.addEventListener('submit', evt => {\r\n\t\t\tevt.preventDefault()\r\n\r\n\t\t\tconst buttonElement = formElement.querySelector(\r\n\t\t\t\tvalidationConfig.submitButtonSelector\r\n\t\t\t)\r\n\t\t\tbuttonElement.textContent = 'Сохранение...'\r\n\t\t})\r\n\t\tsetEventListeners(formElement, validationConfig)\r\n\t})\r\n}\r\n\r\nconst clearValidation = (formElement, validationConfig) => {\r\n\tconst inputList = Array.from(\r\n\t\tformElement.querySelectorAll(validationConfig.inputSelector)\r\n\t)\r\n\tconst buttonElement = formElement.querySelector(\r\n\t\tvalidationConfig.submitButtonSelector\r\n\t)\r\n\r\n\tdisableSubmitButton(buttonElement, validationConfig)\r\n\tbuttonElement.textContent = 'Сохранить'\r\n\r\n\tinputList.forEach(inputElement =>\r\n\t\thideInputError(formElement, inputElement, validationConfig)\r\n\t)\r\n}\r\n\r\nexport { enableValidation, clearValidation }\r\n","import './pages/index.css'\r\nimport { openModal } from './scripts/modal.js'\r\nimport {\r\n\tcreateCard,\r\n\tdeleteCallback,\r\n\tperformActionLike,\r\n} from './scripts/card.js'\r\nimport {\r\n\thandleAddCardForm,\r\n\thandleEditForm,\r\n\tfillProfilePopupEdit,\r\n\tdisplayProfile,\r\n\thandleAvatarForm,\r\n\tshowAvatar,\r\n} from './scripts/handler.js'\r\nimport { enableValidation, clearValidation } from './scripts/validation.js'\r\nimport { getData, getUserData } from './scripts/api.js'\r\n// @todo: DOM узлы\r\nconst containerList = document.querySelector('.places__list')\r\n\r\n// Константы для модальных окон\r\n//Мод.окно ред.профиля\r\nconst popupEdit = document.querySelector('.popup_type_edit')\r\nconst btnEditOpen = document.querySelector('.profile__edit-button')\r\n\r\n//Мод.окно добавления новой карточки\r\nconst popupNewCard = document.querySelector('.popup_type_new-card')\r\nconst btnOpenNewCard = document.querySelector('.profile__add-button')\r\n\r\n//Обработчик событий\r\nconst editForm = document.forms['edit-profile']\r\nconst cardForm = document.forms['new-place']\r\nconst avatarForm = document.forms['avatar']\r\n\r\n//Обработчик открытия картинок\r\nconst modalImg = document.querySelector('.popup_type_image')\r\nconst imgPopup = modalImg.querySelector('.popup__image')\r\nconst popupCaption = modalImg.querySelector('.popup__caption')\r\n\r\nconst openModalImg = evt => {\r\n\tconst img = evt.target\r\n\timgPopup.src = img.src\r\n\timgPopup.alt = popupCaption.textContent = img.alt\r\n\topenModal(modalImg)\r\n}\r\n\r\nconst btnAvatar = document.querySelector('.profile__image')\r\nconst popupAvatar = document.querySelector('.popup_type_avatar')\r\n\r\nconst validationConfig = {\r\n\tformSelector: '.popup__form',\r\n\tinputSelector: '.popup__input',\r\n\tsubmitButtonSelector: '.popup__button',\r\n\tinactiveButtonClass: 'popup__button_disabled',\r\n\tinputErrorClass: 'popup__input_type_error',\r\n\tdisplayError: 'popup__input-error_active',\r\n}\r\n\r\nbtnAvatar.addEventListener('click', () => {\r\n\tavatarForm.reset(),\r\n\t\tclearValidation(avatarForm, validationConfig),\r\n\t\topenModal(popupAvatar)\r\n})\r\n\r\n//вызов мод.окон(ред.проф)\r\nbtnEditOpen.addEventListener('click', () => {\r\n\tclearValidation(editForm, validationConfig)\r\n\topenModal(popupEdit)\r\n\tfillProfilePopupEdit()\r\n})\r\n\r\n//вызов мод. окон(добавление карточки)\r\nbtnOpenNewCard.addEventListener('click', () => {\r\n\tcardForm.reset(),\r\n\t\tclearValidation(cardForm, validationConfig),\r\n\t\topenModal(popupNewCard)\r\n})\r\n\r\n//Включение проверки\r\nenableValidation(validationConfig)\r\n\r\nconst displayCard = (cards, userId) => {\r\n\tcards.forEach(cardData => {\r\n\t\tconst cards = createCard(\r\n\t\t\tcardData,\r\n\t\t\tuserId,\r\n\t\t\tdeleteCallback,\r\n\t\t\tperformActionLike,\r\n\t\t\topenModalImg\r\n\t\t)\r\n\t\tcontainerList.append(cards)\r\n\t})\r\n}\r\n\r\nPromise.all([getData(), getUserData()])\r\n\t.then(([cards, user]) => {\r\n\t\tconst userId = user._id\r\n\t\tdisplayCard(cards, userId)\r\n\t\tdisplayProfile(user)\r\n\t\tshowAvatar(user)\r\n\t})\r\n\t.catch(res => {\r\n\t\tthrow new Error(`Ошибка: ${res.status}`)\r\n\t})\r\n\r\n//Обработчики мод.окон\r\ncardForm.addEventListener('submit', handleAddCardForm)\r\neditForm.addEventListener('submit', handleEditForm)\r\navatarForm.addEventListener('submit', handleAvatarForm)\r\n\r\nexport {\r\n\tcontainerList,\r\n\tpopupNewCard,\r\n\tpopupEdit,\r\n\topenModalImg,\r\n\tbtnAvatar,\r\n\tpopupAvatar,\r\n}\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","openModal","popup","classList","add","addEventListener","closePopupByClick","document","closePopupByEsc","closeModal","remove","removeEventListener","evt","target","currentTarget","contains","querySelector","token","address","handleRequest","res","ok","json","Error","concat","status","putLike","cardId","fetch","method","headers","authorization","then","deleteLike","createCard","cardData","userId","deleteCallback","performActionLike","openModalImg","cardElement","content","cloneNode","resetButton","cardContainerBtnLike","likeButton","likeBtnActive","quantityLike","cardImg","src","link","alt","name","textContent","owner","_id","likes","some","likeElement","createNumberLike","cardDataId","deleteCard","catch","like","btnActive","length","toggle","quantity","nameCardInput","linkCardInput","nameInput","jobInput","profileName","profileJob","avatarInput","avatarImage","displayProfile","profileInfo","about","hideInputError","formElement","inputElement","validationConfig","errorElement","id","inputErrorClass","displayError","disableSubmitButton","buttonElement","disabled","inactiveButtonClass","toggleButtonState","inputList","validity","valid","hasInvalidInput","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","containerList","popupEdit","btnEditOpen","popupNewCard","btnOpenNewCard","editForm","forms","cardForm","avatarForm","modalImg","imgPopup","popupCaption","img","btnAvatar","popupAvatar","formSelector","reset","value","preventDefault","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation","Promise","all","_ref","avatar","_ref2","cards","user","append","displayCard","body","JSON","stringify","prepend"],"sourceRoot":""}